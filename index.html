<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Algebra Past Papers</title>
    <link rel="icon" type="x-icon" href="fakeformative.png">
    <!-- Load external CSS styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <center> <img src="favicon.png" width="200" height="200"> </center>
    <h3>-~- Maths, Science, History, English, Geography, French, Latin, Spanish and more!-~-</h3>

    <!-- Authentication form -->
    <div id="auth-form">
        <input type="password" id="key-input" placeholder="Enter key">
        <button onclick="authenticate()">Submit</button>
    </div>

    <p id="error-msg" style="color: red; display: none;">Invalid key. You really thought.</p>

    <!-- Load external JavaScript -->
    <script src="scripts.js"></script>
    <script>
        // Function to authenticate using KeyAuth
        function authenticateKeyAuth(key) {
            const keyAuth = new KeyAuthApp(
                "Algebra Past Papers", // Application Name
                "8DC21M410X", // Owner ID
                "298697a312e8bf6be4b184aa68953323e3c36f2deb0d49d0459e842a2eb29730", // Application Secret
                "1.0", // Application Version
            );

            keyAuth.verify(key)
                .then(response => {
                    if (response.status === 'success') {
                        // Key is valid, redirect to games.html with parameter 'redirected=true'
                        window.location.href = "games.html?redirected=true";
                    } else {
                        // Key is invalid, display error message
                        document.getElementById("error-msg").style.display = "block";
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        // Function to handle authentication button click
        function authenticate() {
            // Get the entered key
            var enteredKey = document.getElementById("key-input").value.trim();
            
            // Authenticate using KeyAuth
            authenticateKeyAuth(enteredKey);
        }
    </script>
</body>
</html>
